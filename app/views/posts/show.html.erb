<h1><%= @post.title %></h1>

<!-- Displays body if it exists -->
<% if @post.body %>
<p>
  <%= @post.body %><br>
</p>
<% end %>

<!-- Displays image if it exists -->
<% if @post.image %>
<p>
  <!-- Displaying the uplaoded image (in the "public/uploads/post/image" directory)-->
  <%= image_tag(@post.image) %>
</p>
<% end %>

<!-- Displays link if it exists -->
<% if @post.link %>
<p>
  <%= @post.link %>
</p>
<% end %>

Posted by: <%= link_to @post.user.name, user_path(@post.user) %>

<!-- if you're the owner of the post, you can delete or edit -->
<% if @post.user == current_user %>
  <%= link_to 'Edit', edit_post_path(@post) %> |
  <%= link_to 'Delete', @post, method: :delete, data: {confirm: 'Are you sure?'} %>
<% end %>

<!-- Added total comment count for post-->
<h3>Comments (<%= @post.comments.length %>)</h3>

<%= render({:partial => 'comments/comments', :locals => { :my_comments => @post.comments}}) %>

<% if current_user %>
  <h4>New Comment</h4>

  <%= form_for([@post, @comment]) do |f| %>
    <% if @post.errors.any? %>
      <div id="error_explanation">
        <h2><%= pluralize(@review.errors.count, "error") %> prohibited this comment from being saved:</h2>

        <ul>
          <% @comment.errors.full_messages.each do |msg| %>
            <li><%= msg %></li>
          <% end %>
        </ul>
      </div>
    <% end %>

    <div class="field">
      <%= f.label :comment %>
      <%= f.text_area :comment %>
    </div>
    <div class="actions">
      <%= f.submit %>
    </div>
  <% end %>

<% else %>
  <p>
    Please <%= link_to 'log in', new_session_path %> to add a comment.
  </p>
<% end %>

<%= link_to 'Back', posts_path %>
